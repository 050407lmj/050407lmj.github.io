<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>JIM ¬∑ Zero-Resource</title>
  <style>
    :root{--primary:#00f2ff;--bg:#0a0e1a;--text:#e6f7ff}
    [data-theme="light"]{--primary:#4ade80;--bg:#f0f4f8;--text:#0f172a}
    *{box-sizing:border-box;margin:0}
    body{background:var(--bg);color:var(--text);overflow:hidden;font-family:monospace}
    canvas#cyber{position:fixed;inset:0;z-index:-9}
    nav{position:fixed;top:0;left:0;right:0;display:flex;align-items:center;justify-content:space-between;padding:18px 5%;backdrop-filter:blur(12px);background:rgba(10,14,26,.4);border-bottom:1px solid rgba(0,242,255,.2)}
    .logo{font-size:1.5rem;font-weight:700;letter-spacing:2px;text-shadow:0 0 8px var(--primary)}
    main{height:100vh;display:flex;align-items:center;justify-content:center;text-align:center}
    h1{font-size:clamp(2.5rem,6vw,4rem);letter-spacing:4px;text-shadow:0 0 12px var(--primary)}
    #controls{position:fixed;top:60px;right:20px;background:rgba(0,0,0,.5);border:1px solid var(--primary);padding:10px;display:none;flex-direction:column;gap:8px;font-size:12px}
    #controls label{display:flex;align-items:center;gap:6px}
  </style>
</head>
<body data-theme="dark">
<canvas id="cyber"></canvas>
<nav>
  <div class="logo">JIM</div>
  <button id="themeBtn" style="background:transparent;border:1px solid var(--primary);color:var(--primary);padding:6px 12px;border-radius:4px;cursor:pointer">üåì</button>
</nav>
<main><h1 id="typed">JIM</h1></main>
<div id="controls">
  <label>ÊµÅÈÄü <input type="range" id="speed" min="0.1" max="5" value="1" step="0.1"></label>
  <label>ÂèçÂ∞Ñ <input type="range" id="refl" min="0" max="2" value="0.8" step="0.1"></label>
</div>

<script>
/* ÊâìÂ≠óÊú∫ */
const txts=["JIM","Full-Stack","AI Enthusiast","UI Experimenter"];
let i=0,j=0,del=false;
function type(){
  const cur=txts[i];
  if(!del&&j<=cur.length)typed.textContent=cur.substring(0,j++);
  else if(del&&j>=0)typed.textContent=cur.substring(0,j--);
  else{del=!del;if(!del)i=(i+1)%txts.length;}
  setTimeout(type,160);
}
type();

/* WebGL2 Èõ∂ËµÑÊ∫êÁÆ°Á∫ø */
const gl=document.getElementById('cyber').getContext('webgl2',{alpha:false,antialias:false,powerPreference:'high-performance'});
if(!gl)alert('WebGL2 unsupported');
const canvas=gl.canvas;
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;gl.viewport(0,0,canvas.width,canvas.height);}
resize();addEventListener('resize',resize);

const vert=`#version 300 es
in vec2 a;
void main(){gl_Position=vec4(a,0,1);}`;
const frag=`#version 300 es
precision highp float;
uniform float t;
uniform vec2 r;
uniform vec2 m;
uniform float speed;
uniform float refl;
out vec4 o;
// 2D ÊóãËΩ¨
mat2 rot(float a){float c=cos(a),s=sin(a);return mat2(c,-s,s,c);}
// 2D Simplex
float snoise(vec2 p){
  const vec4 C=vec4(.211324865405187,.366025403784439,-.577350269189626,.024390243902439);
  vec2 i=floor(p+dot(p,C.yy));
  vec2 x0=p-i+dot(i,C.xx);
  vec2 i1=(x0.x>x0.y)?vec2(1.,0.):vec2(0.,1.);
  vec2 x1=x0-i1+C.xx;
  vec2 x2=x0-1.+2.*C.xx;
  i=mod289(i);
  vec4 p12=i.xyxy+vec4(0.,i1.xy);
  p12=mod289(p12);
  vec3 m=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.);
  m=m*m;m=m*m;
  vec3 x=2.*fract(p12*C.www)-1.;
  vec3 h=abs(x)-0.5;
  vec3 ox=floor(x+0.5);
  vec3 a0=x-ox;
  m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);
  vec3 g;
  g.x=a0.x*x0.x+h.x*x0.y;
  g.yz=a0.yz*x1.xz+h.yz*x1.yw;
  return 130.*dot(m,g);
}
float fbm(vec2 p){
  float v=0.;float a=.5;
  for(int i=0;i<5;i++){v+=a*snoise(p);p*=2.;a*=.5;}
  return v;
}
void main(){
  vec2 uv=(gl_FragCoord.xy*2.-r)/min(r.x,r.y);
  vec2 mu=(m*2.-r)/min(r.x,r.y);
  // Êâ≠Êõ≤
  vec2 tuv=uv+fbm(uv*3.+t*speed)*.3;
  float d=length(tuv-mu);
  vec3 col=vec3(0);
  // ‰∏ªËâ≤
  vec3 base=mix(vec3(.1,.3,1),vec3(1,.6,.2),sin(d*3.-t*speed)*.5+.5);
  // ÂèçÂ∞Ñ
  vec2 rf=reflect(tuv,mu);
  vec3 refCol=mix(vec3(1,.2,.4),vec3(.2,1,1),sin(rf.x*5.+t)*.5+.5);
  col=mix(base,refCol,refl*exp(-d*2.));
  // Êâ´ÊèèÁ∫ø
  float scan=sin(uv.y*30.-t*speed*6.)*.04;
  col+=scan;
  o=vec4(col,1);
}`;

function compile(src,type){
  const s=gl.createShader(type);
  gl.shaderSource(s,src);
  gl.compileShader(s);
  if(!gl.getShaderParameter(s,gl.COMPILE_STATUS))console.error(gl.getShaderInfoLog(s));
  return s;
}
const prog=gl.createProgram();
gl.attachShader(prog,compile(vert,gl.VERTEX_SHADER));
gl.attachShader(prog,compile(frag,gl.FRAGMENT_SHADER));
gl.linkProgram(prog);
gl.useProgram(prog);

const buf=gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER,buf);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);
const loc=gl.getAttribLocation(prog,'a');
gl.enableVertexAttribArray(loc);
gl.vertexAttribPointer(loc,2,gl.FLOAT,false,0,0);

const ut=gl.getUniformLocation(prog,'t');
const ur=gl.getUniformLocation(prog,'r');
const um=gl.getUniformLocation(prog,'m');
const uspeed=gl.getUniformLocation(prog,'speed');
const urefl=gl.getUniformLocation(prog,'refl');

const speedCtrl=document.getElementById('speed');
const reflCtrl=document.getElementById('refl');
let mx=0,my=0;
canvas.addEventListener('mousemove',e=>{
  mx=e.clientX;my=canvas.height-e.clientY;
});

addEventListener('keydown',e=>{
  if(e.ctrlKey&&e.shiftKey&&e.key==='K')document.getElementById('controls').style.display='flex';
});

let start=performance.now();
function frame(){
  const t=(performance.now()-start)/1000;
  gl.uniform1f(ut,t);
  gl.uniform2f(ur,canvas.width,canvas.height);
  gl.uniform2f(um,mx,my);
  gl.uniform1f(uspeed,parseFloat(speedCtrl.value));
  gl.uniform1f(urefl,parseFloat(reflCtrl.value));
  gl.drawArrays(gl.TRIANGLE_STRIP,0,4);
  requestAnimationFrame(frame);
}
frame();

themeBtn.onclick=()=>document.documentElement.toggleAttribute("data-theme");
</script>
</body>
</html>
